<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 모든 마크업언어(ML)는 반드시 루트 엘리먼트가 유일하게 존재해야 한다. -->

<mapper namespace="ajax">

	<select id="getUserCount" resultType="Integer">
		select count(*) from tblAjaxUser
	</select>
	
	
	
	
	<!-- CRUD -->
	<select id="list" resultType="com.test.ajax.UserDTO">
		select * from tblAjaxUser order by name asc
	</select>
	
	<insert id="add" parameterType="com.test.ajax.UserDTO">
		insert into tblAjaxUser (seq, name, age, address, birthday) 
		values (seqAjaxUser.nextVal, #{name}, #{age}, #{address}, #{birthday})
	</insert>
	
	<select id="get" resultType="com.test.ajax.UserDTO" parameterType="String">
		select * from tblAjaxUser where seq = #{ seq }
	</select>
	
	<update id="edit" parameterType="com.test.ajax.UserDTO">
		update tblAjaxUser set
			name = #{ name },
			age = #{ age },
			adddress = #{ address },
			birthday = #{ birthday }
		where seq = #{ seq } 
	</update>
	
	<delete id="del" parameterType="String">
		delete from tblAjaxUser where seq = #{ seq }
	</delete>
	
	<select id="search" resultType="com.test.ajax.UserDTO" parameterType="String">
		select * from tblAjaxUser where address like '%' || #{ word } || '%'
			order by name asc
	</select>
	
	<select id="getSeq" resultType="String">
		select max(seq) from tblAjaxUser
	</select>
	
</mapper>
